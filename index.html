<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projeto de Software - Login</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f0f2f5; }
        .container { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); width: 300px; }
        h2 { text-align: center; color: #333; }
        input { width: 100%; padding: 0.5rem; margin-bottom: 1rem; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 0.5rem; border: none; border-radius: 4px; color: white; font-weight: bold; cursor: pointer; }
        .btn-cadastrar { background-color: #28a745; margin-bottom: 0.5rem; }
        .btn-login { background-color: #007bff; }
        #resultado { margin-top: 1rem; text-align: center; font-weight: bold; }
    </style>
</head>
<body>

    <div class="container">
        <h2>Sistema de Login</h2>
        <input type="email" id="email" placeholder="Digite seu email" />
        <input type="password" id="senha" placeholder="Digite sua senha" />
        <button onclick="cadastrarUsuario()" class="btn-cadastrar">Cadastrar</button>
        <button onclick="loginUsuario()" class="btn-login">Entrar</button>
        <div id="resultado"></div>
    </div>

    <script>
        // --- CONFIGURAÇÃO JÁ PREENCHIDA ---
        const SUPABASE_URL = 'https://lbgldgqatlrpazvbgrev.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxiZ2xkZ3FhdGxycGF6dmJncmV2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3MzM4MzgsImV4cCI6MjA3MzMwOTgzOH0.T61HP6jXtHBD6Jo4_wHTTofDDoUXhzm2EAGaWJfkA5o';
        // ------------------------------------

        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);
        
        const resultadoDiv = document.getElementById('resultado');

        async function cadastrarUsuario() {
            const email = document.getElementById('email').value;
            const senha = document.getElementById('senha').value;
            resultadoDiv.innerHTML = 'Cadastrando...';

            const { data, error } = await supabaseClient.auth.signUp({
                email: email,
                password: senha,
            });

            if (error) {
                resultadoDiv.innerHTML = `Erro: ${error.message}`;
                resultadoDiv.style.color = 'red';
            } else {
                resultadoDiv.innerHTML = 'Cadastro realizado! Verifique seu email para confirmar.';
                resultadoDiv.style.color = 'green';
                console.log(data);
            }
        }

        async function loginUsuario() {
            const email = document.getElementById('email').value;
            const senha = document.getElementById('senha').value;
            resultadoDiv.innerHTML = 'Entrando...';

            const { data, error } = await supabaseClient.auth.signInWithPassword({
                email: email,
                password: senha,
            });

            if (error) {
                resultadoDiv.innerHTML = `Erro: ${error.message}`;
                resultadoDiv.style.color = 'red';
            } else {
                // AQUI ESTÁ A MUDANÇA:
                window.location.href = 'dashboard.html'; // Redireciona para a nova página
            }
        }
    </script>

</body>
</html>