<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minhas Turmas - Classroom</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body { font-family: 'Roboto', sans-serif; margin: 0; background-color: #f8f9fa; color: #3c4043; }
        header { background-color: white; padding: 0 24px; height: 64px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #dadce0; position: fixed; top: 0; width: calc(100% - 48px); z-index: 100; }
        header h1 { font-size: 22px; color: #5f6368; }
        .user-info { display: flex; align-items: center; gap: 20px; }
        #avatar { width: 32px; height: 32px; background-color: #1e8e3e; color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: 500; }
        .user-info button { background-color: transparent; border: 1px solid #dadce0; color: #3c4043; border-radius: 4px; padding: 8px 16px; cursor: pointer; font-weight: 500; transition: background-color 0.2s; }
        .user-info button:hover { background-color: #f1f3f4; }
        main { padding: 88px 24px 24px 24px; }
        .turmas-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; }
        .turma-card { background-color: white; border: 1px solid #dadce0; border-radius: 8px; display: flex; flex-direction: column; }
        .card-header { background-color: #1e8e3e; color: white; padding: 16px; height: 80px; border-radius: 8px 8px 0 0; position: relative; }
        .card-header h3 { margin: 0; font-size: 20px; }
        .card-body { flex-grow: 1; padding: 16px; }
        .card-footer { padding: 16px; border-top: 1px solid #dadce0; display: flex; justify-content: flex-end; gap: 20px; }
        .material-icons { color: #5f6368; cursor: pointer; }
        #add-turma-btn { position: fixed; bottom: 24px; right: 24px; background-color: white; border: 1px solid #dadce0; border-radius: 50%; width: 56px; height: 56px; display: flex; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        #add-turma-btn .material-icons { font-size: 28px; color: #5f6368; }
    </style>
</head>
<body>

    <header>
        <h1>Classroom Sim</h1>
        <div class="user-info">
            <div id="avatar">K</div>
            <button onclick="fazerLogout()">Sair</button>
        </div>
    </header>

    <main>
        <div class="turmas-grid">
            <div class="turma-card">
                <div class="card-header">
                    <h3>Projeto de Software</h3>
                    <span>2ยบ Semestre</span>
                </div>
                <div class="card-body">
                    </div>
                <div class="card-footer">
                    <span class="material-icons" title="Atividades">assignment</span>
                    <span class="material-icons" title="Pasta da turma">folder</span>
                </div>
            </div>

            <div class="turma-card">
                <div class="card-header" style="background-color: #1a73e8;">
                    <h3>Banco de Dados</h3>
                    <span>2ยบ Semestre</span>
                </div>
                <div class="card-body">
                </div>
                <div class="card-footer">
                    <span class="material-icons" title="Atividades">assignment</span>
                    <span class="material-icons" title="Pasta da turma">folder</span>
                </div>
            </div>
        </div>
    </main>
    
    <div id="add-turma-btn" title="Criar ou participar da turma">
        <span class="material-icons">add</span>
    </div>

    <script>
        const SUPABASE_URL = 'https://lbgldgqatlrpazvbgrev.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxiZ2xkZ3FhdGxycGF6dmJncmV2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3MzM4MzgsImV4cCI6MjA3MzMwOTgzOH0.T61HP6jXtHBD6Jo4_wHTTofDDoUXhzm2EAGaWJfkA5o';

        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_KEY);

        const avatarDiv = document.getElementById('avatar');

        document.addEventListener('DOMContentLoaded', async () => {
            const { data: { session } } = await supabaseClient.auth.getSession();
            if (!session) {
                window.location.href = 'index.html';
            } else {
                // Pega a primeira letra do email para colocar no avatar
                const userEmail = session.user.email;
                const initial = userEmail.charAt(0).toUpperCase();
                avatarDiv.textContent = initial;
            }
        });

        async function fazerLogout() {
            await supabaseClient.auth.signOut();
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>